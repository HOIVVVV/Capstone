<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}í•˜ìˆ˜ê´€ë¡œ ê´€ë¦¬ ì‹œìŠ¤í…œ{% endblock %}</title>
  <style>
    body { margin: 0; font-family: 'Noto Sans KR', sans-serif; background: #f9f9f9; }
    .layout { display: flex; height: 100vh; }
    .sidebar {
      width: 220px;
      background: linear-gradient(to bottom, #d32f2f, #b71c1c);
      color: white;
      padding: 20px;
    }
    .sidebar h2 { margin-top: 0; font-size: 18px; }
    .sidebar ul { list-style: none; padding: 0; margin-top: 40px; }
    .sidebar li { padding: 10px 0; cursor: pointer; }
    .sidebar li:hover, .sidebar .active { font-weight: bold; color: #ffd700; }

    .main { flex: 1; display: flex; flex-direction: column; }
    .topbar {
      height: 60px;
      background: #fff;
      border-bottom: 1px solid #ddd;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
    }
    .footer {
      height: 40px;
      background: #fff;
      border-top: 1px solid #ddd;
      text-align: center;
      padding: 10px;
      font-size: 13px;
      color: #777;
    }
    .content {
      flex: 1;
      padding: 20px;
      background: #f9f9f9;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <div class="layout">
    <!-- Sidebar -->
    <div class="sidebar">
      <h2>í•˜ìˆ˜ê´€ë¡œ ê´€ë¦¬ ì‹œìŠ¤í…œ</h2>
      <ul>
        <li {% if active_page == 'dashboard' %}class="active"{% endif %}>
            <a href="/" style="color: inherit; text-decoration: none;">ëŒ€ì‹œë³´ë“œ</a>
        </li>
        <li {% if active_page == 'result' %}class="active"{% endif %}>
            <a href="/result" style="color: inherit; text-decoration: none;">ê´€ë¡œ ì ê²€ ê²°ê³¼</a>
        </li>
        <li {% if active_page == 'stats' %}class="active"{% endif %}>
            <a href="/stats" style="color: inherit; text-decoration: none;">ì†ìƒ í†µê³„</a>
        </li>
        <li {% if active_page == 'map' %}class="active"{% endif %}>
            <a href="/map" style="color: inherit; text-decoration: none;">ì†ìƒë„ ë§¤í•‘</a>
        </li>
        <li {% if active_page == 'upload' %}class="active"{% endif %}>
            <a href="/upload" style="color: inherit; text-decoration: none;">í•˜ìˆ˜ê´€ë¡œ ì†ìƒ ë¶„ì„</a>
        </li>
        </ul>
    </div>

    <!-- Main -->
    <div class="main">
      <!-- Topbar -->
      <div class="topbar">
        <div style="display: flex; gap: 40px; font-size: 15px;">
          <div>
            ğŸ“Š <strong>ì†ìƒ ì´ë¯¸ì§€</strong>: <span id="damage-count">-</span>ê±´
          </div>
          <div>
            ğŸ¬ <strong>ë¶„ì„ ì˜ìƒ</strong>: <span id="video-count">-</span>ê±´
          </div>
        </div>
        <span style="font-size: 14px; color: #444;">ì‹œìŠ¤í…œ ì†Œê°œ</span>
      </div>

      <!-- Content block -->
      <div class="content">
        {% block content %}{% endblock %}
      </div>

      <!-- Footer -->
      <div class="footer">
        Â© 2025 <a href="http://sejong.ac.kr" target="_blank">Sejong University</a> Capstone Team 6
      </div>
    </div>
  </div>
</body>
</html>

<script>
  // í˜ì´ì§€ ë¡œë“œ ì‹œ ì†ìƒ ì´ë¯¸ì§€ ë° ì˜ìƒ ê°œìˆ˜ ìš”ì²­
  window.addEventListener('DOMContentLoaded', () => {
    fetch('/api/count_summary')
      .then(res => res.json())
      .then(data => {
        document.getElementById('damage-count').textContent = data.damage_images;
        document.getElementById('video-count').textContent = data.videos;
      })
      .catch(err => {
        console.error("ğŸ“› ê°œìˆ˜ ì¡°íšŒ ì‹¤íŒ¨:", err);
      });
  });
</script>
